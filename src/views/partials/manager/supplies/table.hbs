
<table class="table table-hover"> <!--table-bordered-->
    <colgroup>
        <col style="width: 5%;"> <!--image-->
        <col style="width: 25%;"> <!--barcode-->
        <col style="width: 25%;"> <!--name-->
        <col style="width: 20%;"> <!--description-->
        <col style="width: 4%;"> <!--existence-->
        <col style="width: 6%;"> <!--price-->
        <col style="width: 15%;"> <!--button-->
    </colgroup>
    <thead>
    <tr>
        <th></th>
        <th>Barcode</th>
        <th>Name</th>
        <th>Description</th>
        <th>Existence</th>
        <th>Price</th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    {{#each supplies}}
        <tr>
            {{#if img}}
                <td><img src="/img/uploads/{{img}}" class="img-s-p"></td>
            {{else}}
                <td><img src="https://cdn-icons-png.flaticon.com/512/415/415682.png" class="img-s-p"></td>
            {{/if}}
            <td>{{barcode}}</td>
            <td>{{name}}</td>
            <td>{{description}}</td>
            <td>{{existence}}</td>
            <td>{{sale_price}}{{sale_unity}}</td>
            <td>
                <button class="btn btn-danger" onclick="edit_inventory('{{id_companies}}','{{id_branches}}','{{id}}','{{img}}','{{barcode}}','{{name}}','{{existence}}','{{purchase_amount}}')"><i class="fi-department fi-ss-truck-loading"></i></button>
                <button class="btn btn-danger" onclick="edit_supplies('{{id_companies}}','{{id_branches}}','{{id}}')"><i class="fi-department fi-sr-pencil"></i></button>
            </td>
        </tr>
    {{/each}}
    </tbody>
</table>





<script>
    async function edit_supplies(id_company,id_branch,id_supplies){
        //we will see if this products have a purchase amount, if not have a purchase amount we will to send to the user to that add this data
        window.location.href = `/fud/${id_company}/${id_branch}/${id_supplies}/edit-supplies-branch`;
    }

    async function edit_inventory(id_company,id_branch,id_supplies,img,barcode,nameDepartment,existence,purchaseAmount){
        //we will see if this products have a purchase amount, if not have a purchase amount we will to send to the user to that add this data
        if(purchaseAmount!=''){
            show_message_edit(id_supplies,id_branch,img,barcode,nameDepartment,existence,purchaseAmount);
        }else{
            window.location.href = `/fud/${id_company}/${id_branch}/${id_supplies}/edit-supplies-branch`;
        }     
    }

    async function show_message_edit(id,id_company,img,barcode,nameDepartment,existence,purchaseAmount){
        //we will to get the data of the new department
        const data=await edit_supplies_branch('Edit '+nameDepartment,img,barcode,nameDepartment,existence,purchaseAmount);
        if(data){
            //get the data of the from 
            var newImg = data[0];
            var newBarcode = data[1];
            var name = data[2];
            var existence = data[3];
            var purchaseAmount = data[4];


            //we will to see if be a name
            if(newBarcode!=""){
                if(name!=""){
                    if(description==""){
                        description="-";
                    }            
                    window.location.href = `/fud/${id_company}/${id}/${barcode}/${nameDepartment}/${existence}/${purchaseAmount}/company-supplies`;
                }
                else{
                    warningMessage('Error','You need add a name to your supplies');
                }
            }
            else{
                warningMessage('Error','You need add a barcode to your supplies');
            }
        }
    }
</script>